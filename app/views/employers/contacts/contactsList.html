<div class="panel panel-default" ng-controller="ContactsCtrl">
    <div class="panel-heading">
        {{employer.name}}'s Contacts
        <button access-level="['add_employer_contact']" type="button" class="btn btn-primary btn-xs" ng-click="newContact()"><i class="fa fa-plus fa-fw"></i> New</button>
    </div>
    <div class="panel-body">
        <div class="panel panel-info collapse" id="collapseNewContact{{employer.id}}">
            <div class="panel-heading">New Contact</div>
            <div class="panel-body">
                <table class="table">
                    <tbody>
                        <tr>
                            <td><div edit-input-code code="createdContact.title" ng-model-labels="contactStaticLabels['title']" edit-form="newForm"></td>
                            <td><div edit-input-text value="createdContact.first_name" edit-form="newForm"></div></td>
                            <td><div edit-input-text value="createdContact.last_name" edit-form="newForm"></div></td>
                            <td><div edit-input-code code="createdContact.sex" ng-model-labels="contactStaticLabels['sex']" edit-form="newForm"></div></td>
                            <td><div edit-input-text value="createdContact.mobile_phone_number" edit-form="newForm"></div></td>
                            <td><div edit-input-check value="createdContact.primary_contact" edit-form="newForm"></div></td>
                            <td class="btn-group">
                                <button type="button" class="btn btn-success btn-xs" ng-click="saveContact()"><i class="fa fa-save fa-fw"></i> Save</button>
                                <button type="button" class="btn btn-default btn-xs" ng-click="closeNewContact()"><i class="fa fa-ban fa-fw"></i>Cancel</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <table class="table">
            <thead>
            <tr>            
                <th>Title</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Sex</th>
                <th>Mobile Phone</th>
                <th>Primary Contact</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
                <tr ng-repeat="contact in contacts" ng-controller="ContactCtrl">
                    <td><div edit-input-code code="contact.title" ng-model-labels="contactStaticLabels['title']" edit-form="editForm"></td>
                    <td><div edit-input-text value="contact.first_name" edit-form="editForm"></div></td>
                    <td><div edit-input-text value="contact.last_name" edit-form="editForm"></div></td>
                    <td><div edit-input-code code="contact.sex" ng-model-labels="contactStaticLabels['sex']" edit-form="editForm"></div></td>
                    <td><div edit-input-text value="contact.mobile_phone_number" edit-form="editForm"></div></td>
                    <td><div edit-input-check value="contact.primary_contact" edit-form="editForm"></div></td>
                    <td>
                        <div ng-hide="editForm" class="btn-group">
                            <button type="button" class="btn btn-primary btn-xs" ng-click="editContact()"><i class="fa fa-edit fa-fw"></i> Edit</button>
                            <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li ng-click="deleteContact()"><a><i class="fa fa-trash-o fa-fw"></i> Delete</a></li>
                            </ul>
                        </div>
                        <div ng-show="editForm" class="btn-group">
                            <button type="button" class="btn btn-success btn-xs" ng-click="saveContact()"><i class="fa fa-save fa-fw"></i> Save</button>
                            <button type="button" class="btn btn-default btn-xs" ng-click="cancelEditContact()"><i class="fa fa-ban fa-fw"></i>Cancel</button>
                        </div>            
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>